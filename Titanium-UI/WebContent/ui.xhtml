<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:icecore="http://www.icefaces.org/icefaces/core"
	xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:ice="http://www.icesoft.com/icefaces/component">
<h:head>
	<title>Titanic</title>
	<ice:outputStyle href="./xmlhttp/css/rime/rime.css" />
	<link rel="stylesheet" type="text/css" href="resources/css/style.css"/>
</h:head>
<h:body>
	<h:form>

		<f:view>
			<f:event listener="#{sessionBean.validate}" type="preRenderView" />
		</f:view>

		<ace:tabSet id="sampleTabSet" clientSide="false"
			binding="#{sessionBean.tabSet}"
			tabChangeListener="#{sessionBean.tabChange}">

			<!-- ======== SCHEDULINGS VIEW ======== -->

			<ui:include src="schedulings-view.xhtml" />

			<!-- ======== INSTANCE LOG VIEW ======== -->

			<ui:include src="instance-log-view.xhtml" />

			<!-- ======== SCHEDULER VIEW ======== -->
			
			<ui:include src="scheduler-view.xhtml" />

			<!-- divider -->
			<ace:tabPane label="" disabled="true"
				rendered="#{sessionBean.user.authenticated}" />

			<!-- ======== DYNAMIC TABS ======== -->
			
			<ui:include src="dynamic-tabs.xhtml" />
			
			<!-- divider -->
			<ace:tabPane label="" disabled="true"
				rendered="#{sessionBean.user.authenticated}" />

			<!-- ======== LOG OUT ======== -->

			<ace:tabPane id="log_out" label="Log out"
				rendered="#{sessionBean.user.authenticated}" />


		</ace:tabSet>

		<!-- ========== SUBMIT MONITORS ========= -->

		<ace:submitMonitor for="refresh" activeLabel="Refreshing"
			autoCenter="true" blockUI="@source" />

		<ace:submitMonitor for="add_scheduling_monitor" activeLabel="Adding"
			autoCenter="true" blockUI="@source" />

		<ace:submitMonitor for="search_date" blockUI="@source"
			activeLabel="Searching" />

		<ace:submitMonitor for="tab_confirm_edit" activeLabel="Confirming"
			autoCenter="true" blockUI="@source" />

		<!--  ========== DIALOGS ========= -->

		<ace:confirmationDialog id="run_confirmation" widgetVar="run_conf"
			message="Are you sure you want to run following schedulings?"
			header="Confirm Run" width="330" height="300">
			<ice:outputText value="#{schedulingDataManager.schedulingList}"
				escape="false" />
			<h:panelGrid columns="2">
				<h:commandButton value="Yes" onclick="run_conf.hide()"
					actionListener="#{schedulingDataManager.runSelectedSchedules}" />
				<h:commandButton value="No" onclick="run_conf.hide()" />
			</h:panelGrid>
		</ace:confirmationDialog>

		<ace:confirmationDialog id="resume_confirmation"
			widgetVar="resume_conf"
			message="Are you sure you want to resume following schedulings?"
			header="Confirm Resume" width="330" height="300">
			<ice:outputText value="#{schedulingDataManager.schedulingList}"
				escape="false" />
			<h:panelGrid columns="2">
				<h:commandButton value="Yes" onclick="resume_conf.hide()"
					actionListener="#{schedulingDataManager.resumeSelected}" />
				<h:commandButton value="No" onclick="resume_conf.hide()" />
			</h:panelGrid>
		</ace:confirmationDialog>

		<ace:confirmationDialog id="hold_confirmation" widgetVar="hold_conf"
			message="Are you sure you want to put following schedulings on hold?"
			header="Confirm Hold" width="330" height="300">
			<ice:outputText value="#{schedulingDataManager.schedulingList}"
				escape="false" />
			<h:panelGrid columns="2">
				<h:commandButton value="Yes" onclick="hold_conf.hide()"
					actionListener="#{schedulingDataManager.holdSelected}" />
				<h:commandButton value="No" onclick="hold_conf.hide()" />
			</h:panelGrid>
		</ace:confirmationDialog>

		<ace:confirmationDialog id="remove_confirmation"
			widgetVar="remove_conf"
			message="Are you sure you want to remove following schedulings?"
			header="Confirm Hold" width="330" height="300">
			<ice:outputText value="#{schedulingDataManager.schedulingList}"
				escape="false" />
			<h:panelGrid columns="2">
				<h:commandButton value="Yes" onclick="remove_conf.hide()"
					actionListener="#{schedulingDataManager.removeSelected}" />
				<h:commandButton value="No" onclick="remove_conf.hide()" />
			</h:panelGrid>
		</ace:confirmationDialog>

		<ace:dialog visible="#{schedulingDataManager.responseDialogVisible}"
			rendered="#{schedulingDataManager.responseDialogVisible}"
			modal="true" resizable="false" header="Report">
			<h:panelGrid columns="1">
				<c:forEach items="#{schedulingDataManager.runReport}" var="report">
					<h:outputText value="#{report}" />
				</c:forEach>
			</h:panelGrid>
		</ace:dialog>

	</h:form>
</h:body>
</html>