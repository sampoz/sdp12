<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:icecore="http://www.icefaces.org/icefaces/core"
	xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:ice="http://www.icesoft.com/icefaces/component">
<h:head>
	<title>ICEfaces 3</title>
	<ice:outputStyle href="./xmlhttp/css/rime/rime.css" />
</h:head>
<h:body>
	<h:form>
		<ace:tabSet id="sampleTabSet" clientSide="false">

			<ace:tabPane id="schedulings" label="Schedulings">
				<ace:menuBar>
					 <ace:menuItem id="select_all"
                                          value="Select All"
                                          actionListener="#{sessionBean.SelectAll}">
                                <ace:ajax event="activate" execute="@this" />
                        </ace:menuItem>
                        <ace:menuItem id="deselect_all"
                                          value="Deselect All"
                                          actionListener="#{sessionBean.DeSelectAll}">
                                <ace:ajax event="activate" execute="@this" />
                        </ace:menuItem>
                        <ace:menuItem id="stop_selected"
                                          value="Stop Selected"
                                          actionListener="#{sessionBean.StopSelected}">
                                <ace:ajax event="activate" execute="@this" />
                        </ace:menuItem>
				</ace:menuBar>
				<ace:accordion id="accordion" collapsible="true" autoHeight="false"
					activeIndex="1">
					<ace:accordionPane id="addScheduling" title="Add Scheduling">

						<h:panelGrid id="addGrid" columns="6"
							styleClass="centeredPanelWithBorderSpacingAndLeftJustifiedText">
							<h:outputLabel id="nameLabel" for="nameInput" value="Name: " />
							<h:inputText id="nameInput" value="#{sessionBean.builder.name}" />
							<h:outputLabel id="descLabel" for="descInput"
								value="Description: " />
							<h:inputText id="descInput"
								value="#{sessionBean.builder.description}" />
							<h:outputLabel id="cronLabel" for="cronInput" value="CRON: " />
							<h:inputText id="cronInput" value="#{sessionBean.builder.cron}" />
							<h:outputLabel id="serviceLabel" for="serviceInput"
								value="Service Id: " />
							<h:inputText id="serviceInput"
								value="#{sessionBean.builder.serviceID}" />
							<h:outputLabel id="statusLabel" for="statusInput"
								value="Status Id: " />
							<h:inputText id="statusInput"
								value="#{sessionBean.builder.statusID}" />
							<h:outputLabel id="bankLabel" for="bankInput"
								value="Bank Holiday: " />
							<h:inputText id="bankInput"
								value="#{sessionBean.builder.bankHolidayOnly}" />

						</h:panelGrid>

						<ice:commandButton id="add_scheduling" value="Add Scheduling"
							actionListener="#{sessionBean.addScheduling}" />
						
						

					</ace:accordionPane>
				</ace:accordion>
				 
				<ace:dataTable id="scheduleTable"
					value="#{sessionBean.scheduleData}" var="schedule" paginator="true"
					paginatorPosition="bottom" rows="10" stateMap="#{sessionBean.stateMap}" selectionMode="multiple">
					<ace:ajax event="select" execute="@this" />
					

					<ace:column id="name" headerText="Name" sortBy="#{schedule.name}"
						filterBy="#{schedule.name}" filterMatchMode="contains">
						<ace:cellEditor>
							<f:facet name="output">
								<h:outputText id="nameCell" value="#{schedule.name}" />
							</f:facet>
							<f:facet name="input">
								<h:inputText id="nameInput" value="#{schedule.name}" />
							</f:facet>
						</ace:cellEditor>

					</ace:column>
					<ace:column id="mode" headerText="Mode"
						sortBy="#{schedule.modeLabel}"
						filterBy="#{schedule.modeLabel}" filterMatchMode="contains">
						<h:outputText id="modeCell" value="#{schedule.modeLabel}"/>
							
						
					</ace:column>
					<ace:column id="time" headerText="Time" sortBy="#{schedule.cron}"
						filterBy="#{schedule.cron}" filterMatchMode="contains">
						<ace:cellEditor>
							<f:facet name="output">
								<h:outputText id="timeCell" value="#{schedule.cron}" />
							</f:facet>
							<f:facet name="input">
								<h:inputText id="timeInput" value="#{schedule.cron}" />
							</f:facet>
						</ace:cellEditor>
					</ace:column>
					<ace:column id="cron_variables" headerText="Vars" >
						<h:outputText id="bank_cell" value="#{schedule.bankHolidayOnly}" />
						<h:outputText id="java_cell" value="#{schedule.javaAgentPollable}" />
					</ace:column>
					<ace:column id="source" headerText="Source">
					
					<h:outputText id="sourceCell" value="#{schedule.sourceName}" />
					</ace:column>
					
					<ace:column id="target" headerText="Target">
						<h:outputText id="targetCell" value="#{schedule.targetName}" />
					</ace:column>
					
					<ace:column id="description" headerText="Description"
						sortBy="#{schedule.description}"
						filterBy="#{schedule.description}" filterMatchMode="contains">
						<ace:cellEditor>
							<f:facet name="output">
								<h:outputText id="descCell" value="#{schedule.description}" />
							</f:facet>
							<f:facet name="input">
								<h:inputText id="descInput" value="#{schedule.description}" />
							</f:facet>
						</ace:cellEditor>
					</ace:column>
					
					

					<!-- 			<ace:column id="options" headerText="Options"> -->
					<!--                    <ace:rowEditor id="editor" rowEditListener="#{sessionBean.edit}"> -->

					<!--                    </ace:rowEditor> -->
					<!--             </ace:column> -->

					<ace:column id="edit" headerText="Edit">
						<ace:expansionToggler changeListener="#{sessionBean.expansion}" />
					</ace:column>
					<ace:panelExpansion>
						<ace:panel id="edit_panel" header="Edit">

							<h:panelGrid id="editGrid" columns="6"
								styleClass="centeredPanelWithBorderSpacingAndLeftJustifiedText">
								<h:outputLabel id="editNameLabel" for="editNameInput"
									value="Name: " />
								<h:inputText id="editNameInput" value="#{sessionBean.editBuffer.get(schedule.id).name}" />
								<h:outputLabel id="editDescLabel" for="editDescInput"
									value="Description: " />
								<h:inputText id="editDescInput" value="#{sessionBean.editBuffer.get(schedule.id).description}" />
								<h:outputLabel id="editCronLabel" for="editCronInput"
									value="CRON: " />
								<h:inputText id="editCronInput" value="#{sessionBean.editBuffer.get(schedule.id).cron}" />
								<h:outputLabel id="editServiceLabel" for="editServiceInput"
									value="Service Id: " />
								<h:inputText id="editServiceInput" value="#{sessionBean.editBuffer.get(schedule.id).serviceID}" />
								<h:outputLabel id="editStatusLabel" for="editStatusInput"
									value="Status Id: " />
								<h:inputText id="editStatusInput" value="#{sessionBean.editBuffer.get(schedule.id).statusID}" />
								<h:outputLabel id="editBankLabel" for="editBankInput"
									value="Bank Holiday: " />
								<h:inputText id="editBankInput"
									value="#{sessionBean.editBuffer.get(schedule.id).bankHolidayOnly}" />


							</h:panelGrid>

							<br />
							<ice:commandButton id="confirm_edit" value="Confirm"
								actionListener="#{sessionBean.confirmEdit(schedule)}"/> 
							
							<ice:commandButton id="reset_edit" value="Reset"
								 actionListener="#{sessionBean.resetEdit(schedule)}"/>

						</ace:panel>

					</ace:panelExpansion>
				</ace:dataTable>



			</ace:tabPane>

			<ace:tabPane id="scheduling_log" label="Scheduling Log">

			</ace:tabPane>

			<ace:tabPane id="audit_log" label="Audit Log">

			</ace:tabPane>

		</ace:tabSet>

	</h:form>
</h:body>
</html>